<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ThemeQR â€“ Theme & Deck Manager</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/theme_applier.css') }}">
  <link rel="icon" href="https://themeqr.com/images/TQR_Dude_Sm.png">
</head>
<body>
<header>
  <h1>ThemeQR: Theme & Deck Manager</h1>
  <p>Manage your themes and decks effortlessly.</p>
</header>

<div class="section">
  <h2>Available Themes</h2>
  <div id="themeFoldersContainer" class="grid"></div>
  <div id="themeDetailsSection" class="details-section" style="display:none;">
    <h3>Selected Theme Details: <span id="selectedThemeName"></span></h3>
    <pre id="themeDetailsDisplay">Select a theme to see its details.</pre>
    <button id="applyThemeToDeckButton" class="btn">Apply Theme to Deck</button>
  </div>
</div>

<div class="section">
  <h2>Your Decks</h2>
  <div id="deckFoldersContainer" class="grid"></div>
  <div id="deckDetailsSection" class="details-section" style="display:none;">
    <h3>Selected Deck Details: <span id="selectedDeckName"></span></h3>
    <pre id="deckDetailsDisplay">Select a deck to see its details.</pre>
    <button id="applyDeckToThemeButton" class="btn">Apply Deck to Theme</button>
  </div>
</div>

<div id="loadingIndicator" class="loading" style="display:none;">Loading data...</div>
<div id="errorDisplay" class="error" style="display:none;">Error: <span id="errorMessage"></span></div>

<!-- Modal Example (implement your logic to show/hide as needed) -->
<div id="applyThemeToDeckModal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Apply Theme "<span id="modalThemeToDeckName"></span>"</h3>
      <button class="modal-close-button" id="closeThemeToDeckModalButton">&times;</button>
    </div>
    <div>
      <label for="themeToDeckSelect">Select a Deck:</label>
      <select id="themeToDeckSelect" style="width:100%;padding:0.5rem;"></select>
    </div>
    <button id="confirmApplyThemeToDeckButton" class="btn">Confirm Apply</button>
  </div>
</div>

<!-- ... repeat modal for Deck to Theme if needed ... -->

<footer class="footer">
  &copy; 2025 ThemeQR. All rights reserved.
</footer>
<script type="module">
  // --- Demo JS logic for illustration only. Replace with your Supabase JS ---
  // This will create demo cards to show the visual look

  // DEMO DATA -- replace this block with real Supabase fetches!
  const themes = [
    { id: 't1', name: 'Birthday Bash', desc: 'Fun birthday video and colors' },
    { id: 't2', name: 'Corporate Blue', desc: 'Branded for business' }
  ];
  const decks = [
    { id: 'd1', deck_name: 'Summer Promo', qr: '...', wrapper: '...' },
    { id: 'd2', deck_name: 'Aiden Birthday', qr: '...', wrapper: '...' }
  ];

  // Theme cards
  const themeFoldersContainer = document.getElementById('themeFoldersContainer');
  themes.forEach(theme => {
    const card = document.createElement('div');
    card.className = 'item-card';
    card.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-4.5-7.5l-2.25 2.25M9.75 4.5l-2.25 2.25M3.75 12l-.75.75-.75-.75M2.25 12.75a3 3 0 003 3h13.5a3 3 0 003-3M6.75 12l-.75.75-.75-.75M17.25 12l.75.75.75-.75M2.25 12.75a3 3 0 003 3h13.5a3 3 0 003-3M6.75 12l-.75.75-.75-.75M17.25 12l.75.75.75-.75M12 10.5h.008v.008H12V10.5zm0 3h.008v.008H12v-3zm0 3h.008v.008H12v-3z" />
      </svg>
      <span class="item-card-name">${theme.name}</span>
    `;
    card.onclick = () => {
      document.getElementById('themeDetailsSection').style.display = '';
      document.getElementById('selectedThemeName').innerText = theme.name;
      document.getElementById('themeDetailsDisplay').innerText = JSON.stringify(theme, null, 2);
      document.querySelectorAll('.item-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
    };
    themeFoldersContainer.appendChild(card);
  });

  // Deck cards
  const deckFoldersContainer = document.getElementById('deckFoldersContainer');
  decks.forEach(deck => {
    const card = document.createElement('div');
    card.className = 'item-card';
    card.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-4.5-7.5l-2.25 2.25M9.75 4.5l-2.25 2.25M3.75 12l-.75.75-.75-.75M2.25 12.75a3 3 0 003 3h13.5a3 3 0 003-3M6.75 12l-.75.75-.75-.75M17.25 12l.75.75.75-.75M2.25 12.75a3 3 0 003 3h13.5a3 3 0 003-3M6.75 12l-.75.75-.75-.75M17.25 12l.75.75.75-.75M12 10.5h.008v.008H12V10.5zm0 3h.008v.008H12v-3zm0 3h.008v.008H12v-3z" />
      </svg>
      <span class="item-card-name">${deck.deck_name}</span>
    `;
    card.onclick = () => {
      document.getElementById('deckDetailsSection').style.display = '';
      document.getElementById('selectedDeckName').innerText = deck.deck_name;
      document.getElementById('deckDetailsDisplay').innerText = JSON.stringify(deck, null, 2);
      document.querySelectorAll('.item-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
    };
    deckFoldersContainer.appendChild(card);
  });

  // Modal logic - placeholder only
  document.getElementById('applyThemeToDeckButton').onclick = () => {
    document.getElementById('applyThemeToDeckModal').style.display = 'flex';
    document.getElementById('modalThemeToDeckName').innerText = document.getElementById('selectedThemeName').innerText;
  };
  document.getElementById('closeThemeToDeckModalButton').onclick = () => {
    document.getElementById('applyThemeToDeckModal').style.display = 'none';
  };
  // Add similar modal logic for Deck to Theme if you wish
</script>
</body>
</html>
